<html>
	<head>
		<meta charset="UTF-8" />
	</head>
	<body>
		<button id="foo">
			foo
		</button>
		<button id="add">
			add 3,5
		</button>
		<button id="count">
			count
		</button>

	<script>
		if(!('WebAssembly' in window)) {
			alert('you need a wasm support enabled');
		}
		
		var foo = undefined, vadd = undefined, vcount = undefined;
		function check() {
			if (!foo | !vadd | !vcount) return false;
			else return true;
		}
		var Module={
		 onRuntimeInitialized: function() {
				     foo = Module.cwrap('foo', null, null);
				     vadd = Module.cwrap('add', 'number', ['number', 'number']);
				     vcount = Module.cwrap('count', 'number', null);
			           },
	};

		document.getElementById('foo').addEventListener('click', function() {if (check()) foo();});
		document.getElementById('add').addEventListener('click', function() {if(check()) console.log('add  + 5 = ' + vadd(3,5))});
		document.getElementById('count').addEventListener('click', function() {if(check()) console.log('count: ' + vcount())});
	</script>
	<script async src="test.js">
	</script>
	</body>
</html>
